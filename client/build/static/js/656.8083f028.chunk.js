"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[656],{656:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(43),n=s(265),l=s(397),o=s(184),c=s(2),i=s(468),r=s(505),d=s(722),x=s(579);function u(){const{id:e}=(0,n.g)(),t=(0,n.Zp)(),[s,u]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[g,p]=(0,a.useState)(0),[f,j]=(0,a.useState)(!1),[w,y]=(0,a.useState)(!1),[v,b]=(0,a.useState)(null),[N,k]=(0,a.useState)(""),[z,S]=(0,a.useState)(!0),[A,C]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{const s=sessionStorage.getItem("token");if(s)try{const t=await d.A.get("".concat(r.y,"/songs/").concat(e,"/"),{headers:{Authorization:"Token ".concat(s)}});console.log("Songs: ".concat(t.data.audio)),u(t.data);const a=await d.A.get("".concat(r.y,"/comments/").concat(e),{headers:{Authorization:"Token ".concat(s)}});m(a.data);const n=await d.A.get("".concat(r.y,"/songs/").concat(e,"/likes/"),{headers:{Authorization:"Token ".concat(s)}});p(n.data.length);const l=n.data.some((e=>e.user===t.data.user));j(l),S(!1)}catch(A){C(A.message),S(!1)}else t("/login")})()}),[e,t]);const _=async a=>{a.preventDefault();const n=sessionStorage.getItem("token");if(n)try{f?(await d.A.delete("".concat(r.y,"/songs/").concat(e,"/like/delete/"),{headers:{Authorization:"Token ".concat(n)}}),p(g-1),j(!1)):(await d.A.post("".concat(r.y,"/songs/").concat(e,"/like/"),{song:s.id},{headers:{Authorization:"Token ".concat(n)}}),p(g+1),j(!0))}catch(A){console.error("Error in like/dislike:",A)}else t("/login")};return z?(0,x.jsx)(i.A,{}):A?(0,x.jsxs)("p",{children:["Error: ",A]}):(0,x.jsxs)("div",{className:"w-full bg-gray-300",children:[(0,x.jsx)("div",{className:"flex justify-start p-4",children:(0,x.jsx)("button",{onClick:()=>t(-1),className:"bg-gradient-to-r from-purple-500 to-indigo-600 text-white px-6 py-2 rounded-full shadow-xl hover:shadow-2xl transition duration-300",children:"Back"})}),(0,x.jsxs)("div",{className:"flex justify-center space-x-10 px-8 py-8",children:[(0,x.jsxs)("div",{className:"flex-1 p-6 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl shadow-2xl flex flex-col items-center sm:w-3/4 md:w-2/3 lg:w-1/2 xl:w-1/3 space-y-6",children:[(0,x.jsx)("div",{className:"w-full h-auto max-w-xs",children:(0,x.jsx)("img",{className:"w-full object-cover rounded-lg shadow-md",src:s.song_cover_url.startsWith("http")?s.song_cover_url:"".concat(s.song_cover_url),alt:"Song cover"})}),(0,x.jsx)("div",{className:"text-center text-white text-2xl font-semibold",children:(0,x.jsx)("h2",{children:null===s||void 0===s?void 0:s.title})}),(0,x.jsxs)("div",{className:"w-full flex flex-col items-center space-y-4",children:[(0,x.jsx)("audio",{ref:e=>b(e),controls:!0,className:"w-full rounded-lg bg-gray-100 p-2",src:s.audio,type:"audio/*"}),(0,x.jsxs)("div",{className:"flex justify-center space-x-8 mt-4",children:[(0,x.jsx)("button",{className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 hover:shadow-2xl transition duration-300",children:(0,x.jsx)(l.yQt,{size:24})}),(0,x.jsx)("button",{onClick:()=>{w?v.pause():v.play(),y(!w)},className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 hover:shadow-2xl transition duration-300",children:w?(0,x.jsx)(o.kwt,{size:20}):(0,x.jsx)(o.gSK,{size:24})}),(0,x.jsx)("button",{className:"bg-blue-600 text-white p-4 rounded-full shadow-lg hover:bg-blue-700 hover:shadow-2xl transition duration-300",children:(0,x.jsx)(l._W$,{size:24})})]})]})]}),(0,x.jsxs)("div",{className:"flex-1 p-6 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl shadow-2xl flex flex-col items-center space-y-8 sm:w-3/4 md:w-2/3 lg:w-1/2 xl:w-1/3",children:[(0,x.jsx)("div",{className:"text-center text-white text-2xl font-semibold",children:(0,x.jsx)("h2",{children:s.title})}),(0,x.jsxs)("div",{className:"flex flex-col items-center space-y-6 mt-6",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[(0,x.jsx)(o.j1Q,{size:24}),(0,x.jsxs)("span",{children:[h.length," Comments"]})]}),h&&h.length>0?h.map((e=>(0,x.jsx)("div",{className:"flex items-center w-full mt-2",children:(0,x.jsx)("div",{className:"flex-1",children:(0,x.jsxs)("p",{className:"text-gray-300 text-sm",children:[(0,x.jsx)("span",{className:"font-semibold",children:e.user.username}),": ",e.content]})})},e.id))):(0,x.jsx)("p",{className:"text-gray-400",children:"No comments yet."}),(0,x.jsxs)("div",{className:"flex items-center space-x-2 text-white",children:[f?(0,x.jsx)(o.Mbv,{onClick:_,className:"text-red-600 cursor-pointer",size:20}):(0,x.jsx)(o.sOK,{onClick:_,className:"text-gray-500 cursor-pointer",size:20}),(0,x.jsxs)("span",{children:[g," Likes"]})]}),g>0&&(0,x.jsxs)("p",{className:"text-gray-300",children:["Liked by ",g," people"]}),(0,x.jsxs)("form",{onSubmit:async a=>{a.preventDefault();const n=sessionStorage.getItem("token");if(n){if(N.trim())try{const t=await d.A.post("".concat(r.y,"/comment/").concat(e,"/"),{song:s.id,content:N},{headers:{Authorization:"Token ".concat(n)}});m((e=>[...e,t.data])),k("")}catch(A){C(A.message)}}else t("/login")},className:"w-full mt-6",children:[(0,x.jsx)("div",{className:"flex items-center w-full",children:(0,x.jsx)("input",{type:"text",className:"w-full px-4 py-2 border border-gray-600 rounded-md bg-gray-700 text-white placeholder-gray-400 focus:outline-none focus:border-purple-600 transition duration-300",placeholder:"Write a comment...",value:N,onChange:e=>k(e.target.value),required:!0})}),(0,x.jsxs)("div",{className:"flex justify-center gap-1 mt-4",children:[(0,x.jsx)("button",{type:"submit",className:"text-green-400 p-2 rounded-full transition duration-300",children:(0,x.jsx)(o.j1Q,{size:24})}),(0,x.jsxs)("div",{className:"flex justify-center space-x-8 mt-2",children:[(0,x.jsx)("button",{className:"p-0 hover:text-amber-400 text-3xl",children:(0,x.jsx)(o.Hw0,{onClick:async e=>{e.preventDefault();const a=sessionStorage.getItem("token");if(a)try{const e=(await d.A.get(r.y+"/playlist",{headers:{Authorization:"Token ".concat(a)}})).data[0].id;await d.A.put("".concat(r.y,"/playlist/").concat(e,"/add_song/"),{song_id:s.id},{headers:{Authorization:"Token ".concat(a)}}),alert("Song added to playlist")}catch(A){C(A.message)}else t("/login")},size:24})}),(0,x.jsx)("button",{onClick:e=>{e.preventDefault(),t("/allsongs")},className:"text-cyan-200 text-2xl p-0",children:(0,x.jsx)(o.L2J,{size:24})}),(0,x.jsx)("button",{onClick:e=>{e.preventDefault(),t("/playlists")},className:"text-cyan-200 text-2xl p-0",children:(0,x.jsx)(c.DhZ,{size:24})})]})]})]})]})]})]})]})}}}]);
//# sourceMappingURL=656.8083f028.chunk.js.map