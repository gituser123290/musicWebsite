"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[800],{800:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(555),l=s(43),n=s(265),o=s(184),i=s(505),r=s(468),c=s(722),d=s(579);function u(){var e;const{id:t}=(0,n.g)(),s=(0,n.Zp)(),[u,x]=(0,l.useState)({title:"",song_cover:null,artist_id:"",audio:null,duration:"",genre:"Pop"}),[m,g]=(0,l.useState)([]),[h,p]=(0,l.useState)(!1),[j,b]=(0,l.useState)([]),[v,f]=(0,l.useState)(null),[N,w]=(0,l.useState)(!1);(0,l.useEffect)((()=>{(async()=>{const e=sessionStorage.getItem("token");if(e)try{const t=await c.A.get(i.y+"/artists",{headers:{Authorization:"Token ".concat(e)}});g(t.data)}catch(v){f("Failed to load artists")}else(0,n.C5)("/login")})(),(async()=>{const e=sessionStorage.getItem("token");if(e)try{const s=await c.A.get("".concat(i.y,"/songs/").concat(t,"/"),{headers:{Authorization:"Token ".concat(e)}});b(s.data),x({title:s.data.title,song_cover:s.data.song_cover,artist_id:s.data.artist_id,audio:s.data.audio,duration:s.data.duration,genre:s.data.genre})}catch(v){f("Failed to load song",v.message)}else(0,n.C5)("/login")})()}),[t]);const y=e=>{const{name:t,value:s,type:l,files:n}=e.target;x("file"===l?e=>(0,a.A)((0,a.A)({},e),{},{[t]:n[0]}):e=>(0,a.A)((0,a.A)({},e),{},{[t]:s}))};return v?(0,d.jsx)("p",{className:"text-red-500",children:v}):h?(0,d.jsx)(r.A,{}):(0,d.jsxs)("div",{className:"flex items-center justify-center bg-gradient-to-r from-purple-500 to-indigo-600 flex-col w-full",children:[(0,d.jsxs)("div",{className:"w-full sm:w-2/3 md:w-1/2 lg:w-1/3 xl:w-1/4 bg-gray-800 p-6 rounded-lg shadow-xl m-2",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsx)("div",{className:"flex items-center space-x-2",children:(0,d.jsxs)("button",{onClick:()=>s(-1),className:"text-white text-sm font-semibold flex items-center space-x-2 px-4 py-2 rounded-lg bg-orange-400 hover:bg-orange-500 transition duration-200",children:[(0,d.jsx)(o.QVr,{className:"text-xl"}),(0,d.jsx)("span",{children:"Back"})]})})}),j?(0,d.jsxs)("div",{className:"flex flex-col items-center mt-2 space-y-2",children:[(0,d.jsx)("div",{className:"w-full h-auto max-w-xs",children:null!==j&&void 0!==j&&j.song_cover_url?(0,d.jsx)("img",{className:"w-full object-cover rounded-lg shadow-md",src:j.song_cover_url.startsWith("http")?j.song_cover_url:"".concat(j.song_cover_url),alt:"Song cover"}):null!==j&&void 0!==j&&j.song_cover?(0,d.jsx)("img",{className:"w-full object-cover rounded-lg shadow-md",src:j.song_cover.startsWith("http")?j.song_cover:"".concat(j.song_cover),alt:"Song cover"}):null}),(0,d.jsxs)("div",{className:"w-full text-white",children:[(0,d.jsx)("h2",{className:"text-2xl font-semibold",children:j.title}),(0,d.jsxs)("p",{className:"mt-2 text-lg",children:["Artist: ",null===(e=j.artist)||void 0===e?void 0:e.name]}),(0,d.jsxs)("p",{className:"text-lg",children:["Genre: ",j.genre]}),(0,d.jsxs)("p",{className:"text-lg",children:["Duration: ",j.duration]})]}),(0,d.jsxs)("div",{className:"flex justify-center items-center space-x-6 mt-4",children:[(0,d.jsx)("button",{onClick:()=>{w(!0)},className:"text-white text-xl py-2 px-4 rounded-lg hover:bg-sky-500 transition duration-200","aria-label":"Edit Comments",children:(0,d.jsx)(o.wwX,{})}),(0,d.jsx)("button",{className:"text-white text-xl py-2 px-4 rounded-lg hover:bg-red-600 transition duration-200","aria-label":"Delete Song",children:(0,d.jsx)(o.qbC,{})}),(0,d.jsx)("button",{onClick:()=>(e=>{s("/song/".concat(e,"/play"))})(j.id),className:"text-white text-xl py-2 px-4 rounded-lg hover:bg-orange-400 transition duration-200","aria-label":"Play Song",children:(0,d.jsx)(o.gSK,{})})]})]}):(0,d.jsx)("div",{className:"text-center text-white text-xl",children:"No song found!"})]}),N&&(0,d.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded-md shadow-lg w-1/3 columns-2",children:[(0,d.jsx)("h2",{className:"text-xl mb-4",children:"Update Song"}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),p(!0);const a=new FormData;for(let t in u)a.append(t,u[t]);const l=sessionStorage.getItem("token");if(l)try{await c.A.put("".concat(i.y,"/songs/").concat(t,"/"),a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Token ".concat(l)}}),s("/songs/".concat(t))}catch(v){var o,r;f(null===(o=v.response)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.detail)}finally{p(!1)}else(0,n.C5)("/login")},children:[(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Song Name"}),(0,d.jsx)("input",{type:"text",name:"title",value:u.title,onChange:y,className:"w-full p-1 border rounded-md"})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Song Cover"}),(0,d.jsx)("input",{type:"file",name:"song_cover",accept:"image/*",onChange:y,className:"w-full p-2 border rounded-md"}),u.song_cover&&!u.song_cover.name&&(0,d.jsx)("p",{className:"text-gray-600 mt-2",children:j.song_cover.split("/").pop()})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Artist"}),(0,d.jsxs)("select",{name:"artist_id",value:u.artist,onChange:y,className:"w-full p-1 border rounded-md",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Artist"}),m.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Audio File"}),(0,d.jsx)("input",{type:"file",name:"audio",accept:"audio/*",onChange:y,className:"w-full p-1 border rounded-md"}),u.audio&&!u.audio&&(0,d.jsxs)("p",{className:"text-gray-600 mt-2",children:[j.audio.split("/").pop()," "]})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Duration"}),(0,d.jsx)("input",{type:"text",name:"duration",value:u.duration,onChange:y,className:"w-full p-1 border rounded-md"})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Genre"}),(0,d.jsx)("input",{type:"text",name:"genre",value:u.genre,onChange:y,className:"w-full p-1 border rounded-md"})]}),(0,d.jsx)("button",{type:"submit",className:"w-full p-2 bg-blue-500 text-white rounded-md",children:"Submit"})]}),(0,d.jsx)("button",{onClick:()=>{w(!1)},className:"absolute top-4 right-4 text-white text-2xl",children:"\xd7"})]})})]})}}}]);
//# sourceMappingURL=800.51453274.chunk.js.map