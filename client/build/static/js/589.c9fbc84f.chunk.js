"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[589],{589:(e,a,s)=>{s.r(a),s.d(a,{default:()=>o});var t=s(555),l=s(43),r=s(265),n=s(505),i=s(722),d=s(579);function o(){const[e,a]=(0,l.useState)(null),[s,o]=(0,l.useState)([]),[c,m]=(0,l.useState)({name:"",artist_id:"",release_date:"",cover_image:null}),u=(0,r.Zp)();(0,l.useEffect)((()=>{(async()=>{const s=sessionStorage.getItem("token");if(s)try{const e=await i.A.get(n.y+"artists/",{headers:{Authorization:"Token ".concat(s)}});o(e.data)}catch(e){var t,l;a((null===(t=e.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.message)||"Failed to load artists")}else(0,r.C5)("/login")})()}),[u]);const g=e=>{const{name:a,value:s,type:l,files:r}=e.target;m("file"===l?e=>(0,t.A)((0,t.A)({},e),{},{[a]:r[0]}):e=>(0,t.A)((0,t.A)({},e),{},{[a]:s}))};return e?(0,d.jsxs)("p",{children:["Error: ",e]}):(0,d.jsx)("div",{className:"flex w-full min-h-screen justify-center items-center p-4 bg-slate-100",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-lg mb-20",children:[(0,d.jsx)("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Album Information"}),(0,d.jsxs)("form",{onSubmit:async s=>{s.preventDefault();const t=new FormData;for(let e in c)t.append(e,c[e]);try{const e=await i.A.post(n.y+"/albums/create/",t,{headers:{"Content-Type":"multipart/form-data"}});m(e.data),u("/album")}catch(e){var l,r;a((null===(l=e.response)||void 0===l||null===(r=l.data)||void 0===r?void 0:r.message)||e.message||"Failed to create album")}},children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"name",className:"block text-lg text-gray-700 mb-2",children:"Album Name"}),(0,d.jsx)("input",{type:"text",name:"name",id:"name",onChange:g,placeholder:"Enter Album name",className:"w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Artist"}),(0,d.jsxs)("select",{name:"artist_id",value:c.artist_id,onChange:g,className:"w-full p-3 border rounded-md",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Artist"}),s.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"release_date",className:"block text-lg text-gray-700 mb-2",children:"Release Date"}),(0,d.jsx)("input",{type:"date",name:"release_date",id:"release_date",onChange:g,className:"w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{htmlFor:"cover_image",className:"block text-lg text-gray-700 mb-2",children:"Image"}),(0,d.jsx)("input",{type:"file",name:"cover_image",id:"cover_image",accept:"image/*",onChange:g,className:"w-full p-3 border border-gray-300 rounded-md shadow-sm focus:ring-2 focus:ring-blue-500"})]})]}),(0,d.jsx)("div",{className:"mt-6 flex justify-center",children:(0,d.jsx)("button",{type:"submit",className:"px-8 py-3 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700 focus:ring-4 focus:ring-green-500 focus:outline-none",children:"Submit"})})]})]})})}}}]);
//# sourceMappingURL=589.c9fbc84f.chunk.js.map