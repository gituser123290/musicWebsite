"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[929],{929:(e,s,t)=>{t.r(s),t.d(s,{default:()=>g});var n=t(555),a=t(468),o=t(505),l=t(397),r=t(184),i=t(43),c=t(265),d=t(722),u=t(579);function g(){var e;const[s,t]=(0,i.useState)(null),[g,h]=(0,i.useState)(null),[x,m]=(0,i.useState)(0),[v,f]=(0,i.useState)(0),[y,j]=(0,i.useState)(!1),p=(0,i.useRef)(null),[b,N]=(0,i.useState)(C()),[k,w]=(0,i.useState)(C()),S=(0,c.Zp)();function C(){for(var e="#",s=0;s<6;s++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}(0,i.useEffect)((()=>{(async()=>{const e=sessionStorage.getItem("token");if(e)try{const s=await d.A.get(o.y+"/playlist",{headers:{Authorization:"Token ".concat(e)}});t(s.data)}catch(g){h(g)}else(0,c.C5)("/login")})()}),[]),(0,i.useEffect)((()=>{p.current&&(y?p.current.play():p.current.pause())}),[v,y]);const z=()=>{const e=(v+1)%s[x].songs.length;f(e),j(!0),N(C()),w(C())};if((0,i.useEffect)((()=>{s&&0===s.length&&S("/createplaylist")}),[s,S]),g)return(0,u.jsxs)("div",{children:["Error: ",g.message]});if(!s)return(0,u.jsx)(a.A,{});const A=s[x];if(!A||!A.songs||0===A.songs.length)return;const _=A.songs[v];return(0,u.jsx)("div",{className:"bg-gray-900 py-8 px-4",children:(0,u.jsxs)("div",{className:"container mx-auto space-y-8 flex flex-col justify-between min-h-screen",children:[(0,u.jsx)("div",{children:s&&s.length>0?s.map((e=>(0,u.jsxs)("div",{className:"bg-gray-800 rounded-lg shadow-lg p-6 hover:shadow-2xl transition-shadow duration-300 m-2",style:{background:"linear-gradient(to right, ".concat(b,", ").concat(k,")")},children:[(0,u.jsx)(r.qbC,{onClick:()=>(async e=>{const s=sessionStorage.getItem("token");if(s)try{await d.A.delete("".concat(o.y,"/playlist/").concat(e,"/delete"),{headers:{Authorization:"Token ".concat(s)}}),alert("Playlist Deleted Successfully\ud83d\udc4d".concat(e))}catch(g){h(g.message)}else S("/login")})(e.id),size:20,className:"cursor-pointer float-right hover:text-red-600"}),(0,u.jsx)(r.QVr,{onClick:()=>S(-1),size:14,className:"cursor-pointer"}),(0,u.jsxs)("h2",{className:"text-3xl font-bold text-center text-white mb-6",children:["Your ",e.songs.length," ",e.name]}),(0,u.jsx)("div",{className:"space-y-6",children:e&&e.songs.length>0?e.songs.map((s=>{var a;return(0,u.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4 flex items-center justify-between hover:bg-gray-600 transition-all duration-300 transform hover:scale-100",children:[(0,u.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,u.jsx)("img",{className:"w-20 h-20  object-cover rounded-md shadow-md",src:s.song_cover_url.startsWith("http")?s.song_cover_url:"".concat(s.song_cover_url),alt:"Song cover"}),(0,u.jsxs)("div",{className:"text-white",children:[(0,u.jsx)("h3",{className:"text-xl font-semibold cursor-pointer",onClick:()=>{return e=s.id,void S("/songs/".concat(e,"/"));var e},children:null===s||void 0===s?void 0:s.title}),(0,u.jsx)("p",{className:"text-sm text-gray-500",children:null===(a=s.artist)||void 0===a?void 0:a.name}),(0,u.jsxs)("p",{className:"text-sm text-gray-500",children:[s.genre," | ",s.duration]})]})]}),(0,u.jsx)("div",{className:"cursor-pointer hover:text-red-600",children:(0,u.jsx)(r.qbC,{onClick:()=>(async(e,s)=>{const a=sessionStorage.getItem("token");if(a)try{await d.A.delete("".concat(o.y,"/playlists/").concat(e,"/songs/").concat(s),{headers:{Authorization:"Token ".concat(a)}}),alert("Song deleted from playlist"),t((t=>t.map((t=>t.id===e?(0,n.A)((0,n.A)({},t),{},{songs:t.songs.filter((e=>e.id!==s))}):t))))}catch(g){h(g.message)}else S("/login")})(e.id,s.id),size:10})})]},s.id)})):(0,u.jsx)("div",{className:"text-white text-center",children:"No songs found in this playlist"})})]},e.id))):(0,u.jsx)("div",{className:"text-white text-center",children:"No playlists found"})}),(0,u.jsxs)("div",{className:"audio-controls bg-slate-700 text-white mt-6 p-4 rounded-md flex flex-col justify-end",children:[(0,u.jsx)("div",{className:"mt-4 text-blue-600 font-semibold",children:(0,u.jsxs)("h3",{children:[null===_||void 0===_?void 0:_.title," - ",null===_||void 0===_||null===(e=_.artist)||void 0===e?void 0:e.name]})}),(0,u.jsx)("audio",{ref:p,src:"http://localhost:8000".concat(null===_||void 0===_?void 0:_.audio),onEnded:z}),(0,u.jsxs)("div",{className:"flex justify-between items-center",children:[(0,u.jsx)("button",{onClick:()=>{const e=(v-1+s[x].songs.length)%s[x].songs.length;f(e),j(!0),N(C()),w(C())},className:"p-2 bg-gray-700 rounded-lg hover:bg-gray-600",children:(0,u.jsx)(l.yQt,{size:25})}),(0,u.jsx)("button",{onClick:()=>{y?p.current.pause():p.current.play(),j(!y)},className:"p-4 bg-gray-700 rounded-full hover:bg-gray-600",children:y?(0,u.jsx)(r.kwt,{size:25}):(0,u.jsx)(r.gSK,{size:25})}),(0,u.jsx)("button",{onClick:z,className:"p-2 bg-gray-700 rounded-lg hover:bg-gray-600",children:(0,u.jsx)(l._W$,{size:25})})]})]})]})})}}}]);
//# sourceMappingURL=929.d57ae61b.chunk.js.map