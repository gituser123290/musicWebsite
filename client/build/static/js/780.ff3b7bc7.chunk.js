"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[780],{780:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(555),l=a(43),n=a(265),c=a(184),r=a(505),i=a(468),o=a(722),d=a(579);function m(){var e;const{id:t}=(0,n.g)(),[a,m]=(0,l.useState)([]),[u,x]=(0,l.useState)([]),[h,g]=(0,l.useState)(!0),[b,p]=(0,l.useState)(null),[j,v]=(0,l.useState)(!1),f=(0,n.Zp)(),[N,w]=(0,l.useState)({name:"",artist_id:"",cover_image:null,release_date:""});(0,l.useEffect)((()=>{(async()=>{const e=sessionStorage.getItem("token");if(e)try{if(!t)return p("Album ID is missing!"),void g(!1);const a=await o.A.get(r.y+"/artists/",{headers:{Authorization:"Token ".concat(e)}});x(a.data);const s=await o.A.get("".concat(r.y,"/albums/").concat(t,"/"),{headers:{Authorization:"Token ".concat(e)}});s.data?(m(s.data),w({name:s.data.name||"",artist_id:s.data.artist?s.data.artist_id:"",release_date:s.data.release_date||"",cover_image:s.data.song_cover||""}),g(!1)):(p("Album data not found!"),g(!1))}catch(b){console.error("error",b),p(b.message),g(!1)}else f("/login")})()}),[t,f]);const y=e=>{const{name:t,value:a,type:l,files:n}=e.target;w("file"===l?e=>(0,s.A)((0,s.A)({},e),{},{cover_image:n[0]}):e=>(0,s.A)((0,s.A)({},e),{},{[t]:a}))},k=()=>{v(!1)};return h?(0,d.jsx)("div",{children:(0,d.jsx)(i.A,{})}):b?(0,d.jsxs)("p",{children:["Error: ",b]}):(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"flex items-center justify-center w-full flex-col bg-gray-200 pt-4 pb-16",children:[(0,d.jsx)("div",{className:"p-2 bg-orange-500 rounded-md m-2 hover:bg-orange-600 shadow-xl transition-colors duration-200 cursor-pointer",children:(0,d.jsx)("button",{onClick:()=>f(-1),className:"back-btn",children:"Back to Posts"})}),(0,d.jsxs)("div",{className:"w-3/4 sm:w-2/3 md:w-1/2 lg:w-1/3 xl:w-1/4 bg-gray-800 p-2 rounded-md shadow-lg",children:[(0,d.jsx)("h1",{className:"text-center text-cyan-600 text-2xl mb-2",children:"Song Detail"}),a?(0,d.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsx)("img",{className:"w-full h-auto object-cover rounded-md",src:a.cover_image,alt:"Song cover"})}),(0,d.jsx)("hr",{}),(0,d.jsxs)("div",{className:"p-2 columns-2 gap-20",children:[(0,d.jsx)("h2",{className:"text-white text-2xl",children:a.name}),(0,d.jsxs)("p",{className:"text-white",children:["Artist: ",null===(e=a.artist)||void 0===e?void 0:e.name]}),(0,d.jsxs)("p",{className:"text-white",children:["song Name: ",a.songs.length]}),(0,d.jsxs)("div",{className:"flex justify-end",children:[(0,d.jsx)("button",{onClick:()=>{v(!0)},className:"mt-2 text-3xl text-white px-4 py-2 rounded-md hover:text-sky-400",children:(0,d.jsx)(c.wwX,{})}),(0,d.jsx)("button",{onClick:async()=>{const e=sessionStorage.getItem("token");if(e)try{await o.A.delete("".concat(r.y,"/albums/delete/").concat(t,"/"),{headers:{Authorization:"Token ".concat(e)}}),m(null)}catch(b){alert("Unauthorised ".concat(b.message)),f("/albums/".concat(t,"/"))}else f("/login")},className:"mt-2 text-3xl text-white px-4 py-2 rounded-md hover:text-red-600",children:(0,d.jsx)(c.qbC,{})})]})]})]}):(0,d.jsx)("p",{children:"No Album found!"})]}),j&&(0,d.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,d.jsxs)("div",{className:"bg-white p-6 rounded-md shadow-lg w-1/3 columns-2",children:[(0,d.jsx)("h2",{className:"text-xl mb-4",children:"Update Album"}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const a=sessionStorage.getItem("token");if(!a)return void f("/login");const s=new FormData;for(let t in w)s.append(t,w[t]);try{const e=await o.A.put("".concat(r.y,"/albums/").concat(t,"/"),s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Token ".concat(a)}});m(e.data),k()}catch(b){alert("Failed to update song.".concat(b.message))}},children:[(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Name"}),(0,d.jsx)("input",{type:"text",name:"name",value:N.name,onChange:y,className:"w-full p-1 border rounded-md"})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Artist"}),(0,d.jsxs)("select",{name:"artist_id",value:N.artist_id,onChange:y,className:"w-full p-1 border rounded-md",required:!0,children:[(0,d.jsx)("option",{value:"",children:"Select Artist"}),u.map((e=>(0,d.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Song Cover"}),(0,d.jsx)("input",{type:"file",name:"cover_image",accept:"image/*",onChange:y,className:"w-full p-2 border rounded-md"})]}),(0,d.jsxs)("div",{className:"mb-2",children:[(0,d.jsx)("label",{className:"block text-gray-700",children:"Release Date"}),(0,d.jsx)("input",{type:"date",name:"release_date",value:N.release_date,onChange:y,className:"w-full p-1 border rounded-md"})]}),(0,d.jsx)("div",{className:"mb-2",children:(0,d.jsx)("button",{type:"submit",className:"w-full p-2 bg-blue-500 text-white rounded-md",children:"Submit"})})]}),(0,d.jsx)("button",{onClick:k,className:"absolute top-4 right-4 text-white text-2xl",children:"\xd7"})]})})]})})}}}]);
//# sourceMappingURL=780.ff3b7bc7.chunk.js.map